{% set port = port|default(443) %}
{% extends "serverblock.j2" %}

{% block listen_params %}
http2 {% if nginx_vhost.use_https %}ssl{% endif %}
{% endblock %}

{% block options %}
    gzip off;
{% endblock %}

{% block sslcertificates %}
{%- if nginx_vhost.use_https %}
    ssl_certificate {{ stackhead__certificates_folder }}/fullchain.pem;
    ssl_certificate_key {{ stackhead__certificates_folder }}/privkey.pem;
    ssl_trusted_certificate {{ stackhead__certificates_folder }}/chain.pem;
    include /etc/nginx/h5bp/ssl/policy_modern.conf;
    client_max_body_size 10G;
{%- endif %}
{% endblock %}
